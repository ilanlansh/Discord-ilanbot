!function(a){var b=function(a){var c={},d=this;return a=Math.round(a)>-1?Math.round(a):1,c.taskStack=[],c.callbackStack=[],c.threadCount=0,c.isRunning=!1,c.callbackWorkerFactory=function(){var b=function(){var b=setInterval(function(){c.threadCount<a&&(c.callbackStack.length>0?(c.threadCount++,c.callbackStack.pop()()):clearInterval(b))},0)},d=setInterval(function(){c.taskStack.length<1&&0===c.threadCount&&(clearInterval(d),b())},0)},c.taskWorkerFactory=function(){var b=setInterval(function(){c.isRunning=!0,c.threadCount<a&&(c.taskStack.length>0?(c.threadCount++,c.taskStack.pop()()):clearInterval(b))},0)},d.size=function(){return c.taskStack.length},d.isRunning=function(){return c.isRunning},d.inFlight=function(){return c.threadCount},d.addTask=function(a,b){return"function"==typeof a?c.taskStack.push(function(){setTimeout(function(){a.call(b||this),c.threadCount--},0)}):console.error("Queue.addTask expected type 'function' as first parameter; instead received type '"+typeof a+"'"),this},d.addCallback=function(a,b){return"function"==typeof a&&c.callbackStack.push(function(){setTimeout(function(){a.call(b||this),c.threadCount--,c.callbackStack.length<1&&c.threadCount<1&&(c.isRunning=!1)})}),this},d.start=function(){return c.threadCount<1&&(c.taskWorkerFactory(),c.callbackWorkerFactory()),this},this instanceof arguments.callee?void 0:new b(a)},c=function(a){if(null===a)throw new Error("Cannot find appropriate scope for binding; 'window' and 'exports' are undefined!");a.Queue=b};c(a)}("undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window?window:null);